import pytest
from appium import webdriver
from appium.webdriver.common.appiumby import AppiumBy
from appium.options.android import UiAutomator2Options
from time import sleep
from src.config.capabilities import get_capabilities
import pytest
from src.pages.main_page import MainPage

# capabilities = dict(
#     platformName='Android',
#     automationName='uiautomator2',
#     deviceName='Android',
#     appPackage='com.android.settings',
#     appActivity='.Settings',
#     language='en',
#     locale='US'
# )

# capabilities = dict(
#     platformName='Android',
#     automationName='uiautomator2',
#     deviceName='Android',
#     appPackage='com.mdev.tododo',
#     appActivity='com.mdev.tododo.ui.MainActivity',
#     newCommandTimeout=60,
# )
#
# capabilities_options = UiAutomator2Options().load_capabilities(capabilities)

capabilities_options = get_capabilities()

appium_server_url = 'http://127.0.0.1:4723'

# @pytest.fixture()
# def driver():
#     app_driver = webdriver.Remote(appium_server_url, options=capabilities_options)
#     yield app_driver
#     if app_driver:
#         app_driver.quit()


# def test_find_battery(driver):
#     sleep(10)
#     el = driver.find_element(by=AppiumBy.XPATH, value='//android.widget.ImageView[@content-desc="Phone"]')
#     el.click()
#     sleep(10)

def test_todo(driver):
    sleep(3)
    main_page = MainPage(driver)
    main_page.open_menu()
    sleep(5)